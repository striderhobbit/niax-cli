<table>
  <tr>
    <th #drilldownHandle data-drilldown-key="columns">Columns</th>
    <td *ngIf="drilldownKey === 'columns'">
      <form (change)="columnsChange.emit()">
        <table>
          <tr *ngFor="let column of resourceTable.columns; index as i">
            <td>
              <div>
                <input
                  [(ngModel)]="column.include"
                  [name]="columnToggle.id"
                  #columnToggle
                  id="column-toggle-{{ uid }}-{{ i }}"
                  type="checkbox"
                />
              </div>
            </td>
            <th>
              <label [for]="columnToggle.id">{{ column.path }}</label>
            </th>
            <td>
              <input
                (ngModelChange)="
                  columnFilter.invalid || (column.filter = $event)
                "
                [ngModel]="column.filter"
                [title]="columnFilter.errors?.['SyntaxError'] ?? ''"
                #columnFilter="ngModel"
                name="column-filter-{{ uid }}-{{ i }}"
                pattern="[^,]*"
                placeholder="/(?:)/"
                type="text"
                validateRegExp
              />
            </td>
          </tr>
        </table>
      </form>
    </td>
  </tr>
  <tr>
    <th #drilldownHandle data-drilldown-key="sort">Sort</th>
    <td *ngIf="drilldownKey === 'sort'">
      <div
        (cdkDropListDropped)="onPrimaryPathDropped($event)"
        [cdkDropListData]="resourceTable.primaryPaths"
        cdkDropList
        class="primary-paths"
      >
        <div
          *ngFor="let primaryPath of resourceTable.primaryPaths"
          [cdkDragData]="primaryPath"
          cdkDrag
          class="primary-path"
          tabindex="0"
        >
          {{ primaryPath }}
        </div>
      </div>
    </td>
  </tr>
</table>
